{% extends 'base.html.twig' %}

{% block title %}Mon panier - Les gâteaux de la madre{% endblock %}

{% block content %}
<h1 class="h1 mb-3 font-weight-normal">Mon panier</h1>
<table class="table">
  <thead>
    <tr>
      <th scope="col">Produit</th>
      <th scope="col">Quantité</th>
      <th scope="col">Prix</th>
      <th scope="col">Total</th>
    </tr>
  </thead>
    <tbody>
    {% set total = null %}
    {% for products in cart %}
        <tr>
        <th>
            <img src="/uploads/images/{{products.product.illustration}}" alt="{{products.product.name}}" height="75px"><br/>
        </th>
        <td>{{products.product.name}}</td>
        <td>X {{products.quantity}}</td>
        <td>{{(products.product.price / 100 ) | number_format(2)}} € </td>
        <td>{{(products.product.price / 100 ) * products.quantity | number_format(2)}} €</td>
        </tr>
        {% set total = total + (products.product.price * products.quantity) %}
    {% endfor %}
    </tbody>
</table>
<div class="text-right mb-5">
    <b> Nombre de produit : </b> {{cart|length}}<br/>
    <b>Total de mon panier : </b> {{ (total / 100) | number_format(2)}} € <br/><br/>
    <a class="btn btn-danger" href="{{path('delete_cart')}}">Vider le panier</a>
    <a class="btn btn-success" href="">Valider mon panier<a/>
</div>
    

{% endblock %}
